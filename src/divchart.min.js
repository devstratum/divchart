/** * DivChart * @version 1.1 * @author Sergey Osipov <info@devstratum.ru> * @website https://devstratum.ru * @copyright Copyright (c) 2022 Sergey Osipov. All Rights Reserved * @license MIT License * Report bugs https://github.com/devstratum/divchart/issues */
!function(){function c(t){let i="";var e=Math.floor(t/60/60),r=Math.floor(t/60)-60*e,t=t%60;function n(t){let i=t<10?"0"+t:t;return i}return 0<e&&(i+=n(e)+":"),i+=n(r)+":"+n(t),i}function v(t){let i=0,e=t.split(":");return e.reverse(),e[2]&&(i+=3600*Number(e[2])),e[1]&&(i+=60*Number(e[1])),e[0]&&(i+=Number(e[0])),i}this.DivChart=function(){arguments[0]&&"object"==typeof arguments[0]&&(this.options=function(t,i){let e;for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}({selector:"",theme:"light",title:"",description:"",unit:"",better:"",type:"number",separate:!1,labels:!0,grid_wmax:0,grid_part:5,points:[],graphs:[]},arguments[0]))},DivChart.prototype.create=function(){(function(){let i=this.options,t=function(e){let t=0;e.grid_wmax&&"time"===e.type&&(e.grid_wmax=v(e.grid_wmax));if(e.grid_wmax&&"number"==typeof e.grid_wmax)t=e.grid_wmax;else{let i=0;"object"==typeof e.graphs&&e.graphs.forEach(function(t){t.value.forEach(function(t){"time"===e.type&&(t=v(t)),t>i&&(i=t)})}),t=100<i?100*Math.ceil(i/100):Math.ceil(i)}return t}(i),e=i.grid_part;6<e&&e%2!=0&&e++;let r=function(t,i,e){var r="";r+='<div class="grid-line-crs"></div>',r+=function(i,t,e){let r=0,n="",a=100/e,o=Math.round(t/e);for(;e>r;){var l=Math.floor(r*a);let t=r*o;"time"===i.type&&(t=c(t),0===r&&(t=0)),n+='<div class="grid-line line-'+(r+1)+'" style="left:'+l+'%;"><span>'+t+"</span></div>",r++}return n}(t,i,e),"time"===t.type&&(i=c(i));return r+='<div class="grid-line-end"><span>'+i+"</span></div>",r}(i,t,e),n=function(t){let i="";i+='<div class="divchart__header">',i+='<div class="graph-header">',t.title&&(i+='<div class="graph-header__title">'+t.title+"</div>");i+='<div class="graph-header__info">',t.unit&&(i+='<div class="info-unit">'+t.unit+"</div>");var e=function(t){let e="";"object"==typeof t.points&&t.points.forEach(function(t){let i="";t.color&&(i="background:"+t.color+";"),t.title&&(e+='<div class="info-point">',e+='<div class="info-point__color"><span style="'+i+'"></span></div>',e+='<div class="info-point__title">'+t.title+"</div>",e+="</div>")});return e}(t);e&&(i+='<div class="info-points">',i+=e,i+="</div>");t.better&&(i+='<div class="info-better">'+t.better+"</div>");i+="</div>",t.description&&(i+='<div class="graph-header__descr">'+t.description+"</div>");return i+="</div>",i+="</div>",i}(i),a=function(c,d){let p="";"object"==typeof c.graphs&&c.graphs.forEach(function(s){if(p+='<div class="chart-block">',p+='<div class="chart-block__label"><span>'+s.label+"</span></div>",p+='<div class="chart-block__lines">',s.value){let l=999;s.value.forEach(function(e,r){let n;if("time"===c.type&&(e=v(n=e)),"number"==typeof e){var a="z-index:"+l--+";",o="width:"+function(t,i){let e=i/t*100;return e.toFixed(4)}(d,e)+"%;";let t="";s.color&&(t="background:"+s.color[r]+";");let i="position:absolute;";c.separate&&(i="position:relative;"),p+='<div class="chart-line" style="'+o+t+i+a+'">',"time"===c.type?p+="<span>"+n+"</span>":p+="<span>"+e+"</span>",p+="</div>"}})}p+="</div>",p+="</div>"});return p}(i,t),o="";i.labels||(o=" nolabels");let l="";6<e&&(l=" oddparts");let s="";s+='<div class="divchart '+i.theme+'">',s+=n,t&&(s+='<div class="divchart__body">',s+='<div class="graph-body'+o+'">',s+='<div class="graph-body__grid'+l+'">'+r+"</div>",s+='<div class="graph-body__chart">'+a+"</div>",s+="</div>",s+="</div>");if(s+="</div>","string"==typeof i.selector){let t=document.querySelector(i.selector);"object"==typeof t&&null!==t&&(t.innerHTML=s)}}).call(this)}}();
